<!DOCTYPE html>
<html lang="en-US-x-Hixie"><head><title>4.10.21 Constraints &#8212; HTML5</title><style type="text/css">
   pre { margin-left: 2em; white-space: pre-wrap; }
   h2 { margin: 3em 0 1em 0; }
   h3 { margin: 2.5em 0 1em 0; }
   h4 { margin: 2.5em 0 0.75em 0; }
   h5, h6 { margin: 2.5em 0 1em; }
   h1 + h2, h1 + h2 + h2 { margin: 0.75em 0 0.75em; }
   h2 + h3, h3 + h4, h4 + h5, h5 + h6 { margin-top: 0.5em; }
   p { margin: 1em 0; }
   hr:not(.top) { display: block; background: none; border: none; padding: 0; margin: 2em 0; height: auto; }
   dl, dd { margin-top: 0; margin-bottom: 0; }
   dt { margin-top: 0.75em; margin-bottom: 0.25em; clear: left; }
   dt + dt { margin-top: 0; }
   dd dt { margin-top: 0.25em; margin-bottom: 0; }
   dd p { margin-top: 0; }
   dd dl + p { margin-top: 1em; }
   dd table + p { margin-top: 1em; }
   p + * > li, dd li { margin: 1em 0; }
   dt, dfn { font-weight: bold; font-style: normal; }
   i, em { font-style: italic; }
   dt dfn { font-style: italic; }
   pre, code { font-size: inherit; font-family: monospace; font-variant: normal; }
   pre strong { color: black; font: inherit; font-weight: bold; background: yellow; }
   pre em { font-weight: bolder; font-style: normal; }
   @media screen { code { color: orangered; } code :link, code :visited { color: inherit; } }
   var sub { vertical-align: bottom; font-size: smaller; position: relative; top: 0.1em; }
   table { border-collapse: collapse; border-style: hidden hidden none hidden; }
   table thead, table tbody { border-bottom: solid; }
   table tbody th:first-child { border-left: solid; }
   table tbody th { text-align: left; }
   table td, table th { border-left: solid; border-right: solid; border-bottom: solid thin; vertical-align: top; padding: 0.2em; }
   blockquote { margin: 0 0 0 2em; border: 0; padding: 0; font-style: italic; }

   .bad, .bad *:not(.XXX) { color: gray; border-color: gray; background: transparent; }
   .matrix, .matrix td { border: none; text-align: right; }
   .matrix { margin-left: 2em; }
   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   .toc dfn, h1 dfn, h2 dfn, h3 dfn, h4 dfn, h5 dfn, h6 dfn { font: inherit; }
   img.extra, p.overview { float: right; }
   pre.idl { border: solid thin; background: #EEEEEE; color: black; padding: 0.5em 1em; position: relative; }
   pre.idl :link, pre.idl :visited { color: inherit; background: transparent; }
   pre.idl::before { content: "IDL"; font: bold small sans-serif; padding: 0.5em; background: white; position: absolute; top: 0; margin: -1px 0 0 -4em; width: 1.5em; border: thin solid; border-radius: 0 0 0 0.5em }
   pre.css { border: solid thin; background: #FFFFEE; color: black; padding: 0.5em 1em; }
   pre.css:first-line { color: #AAAA50; }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   hr + dl.domintro, div.impl + dl.domintro { margin-top: 2.5em; margin-bottom: 1.5em; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: black; font-style: italic; border: solid 2px; background: white; padding: 0 0.25em; }
   dl.switch { padding-left: 2em; }
   dl.switch > dt { text-indent: -1.5em; }
   dl.switch > dt:before { content: '\21AA'; padding: 0 0.5em 0 0; display: inline-block; width: 1em; text-align: right; line-height: 0.5em; }
   dl.triple { padding: 0 0 0 1em; }
   dl.triple dt, dl.triple dd { margin: 0; display: inline }
   dl.triple dt:after { content: ':'; }
   dl.triple dd:after { content: '\A'; white-space: pre; }
   .diff-old { text-decoration: line-through; color: silver; background: transparent; }
   .diff-chg, .diff-new { text-decoration: underline; color: green; background: transparent; }
   a .diff-new { border-bottom: 1px blue solid; }

   figure.diagrams { border: double black; background: white; padding: 1em; }
   figure.diagrams img { display: block; margin: 1em auto; } 

   h2 { page-break-before: always; }
   h1, h2, h3, h4, h5, h6 { page-break-after: avoid; }
   h1 + h2, hr + h2.no-toc { page-break-before: auto; }

   p  > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]),
   li > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]), { border-bottom: solid #9999CC; }

   div.head { margin: 0 0 1em; padding: 1em 0 0 0; }
   div.head p { margin: 0; }
   div.head h1 { margin: 0; }
   div.head .logo { float: right; margin: 0 1em; }
   div.head .logo img { border: none } /* remove border from top image */
   div.head dl { margin: 1em 0; }
   div.head p.copyright, div.head p.alt { font-size: x-small; font-style: oblique; margin: 0; }

   body > .toc > li { margin-top: 1em; margin-bottom: 1em; }
   body > .toc.brief > li { margin-top: 0.35em; margin-bottom: 0.35em; }
   body > .toc > li > * { margin-bottom: 0.5em; }
   body > .toc > li > * > li > * { margin-bottom: 0.25em; }
   .toc, .toc li { list-style: none; }

   .brief { margin-top: 1em; margin-bottom: 1em; line-height: 1.1; }
   .brief li { margin: 0; padding: 0; }
   .brief li p { margin: 0; padding: 0; }

   .category-list { margin-top: -0.75em; margin-bottom: 1em; line-height: 1.5; }
   .category-list::before { content: '\21D2\A0'; font-size: 1.2em; font-weight: 900; }
   .category-list li { display: inline; }
   .category-list li:not(:last-child)::after { content: ', '; }
   .category-list li > span, .category-list li > a { text-transform: lowercase; }
   .category-list li * { text-transform: none; } /* don't affect <code> nested in <a> */

   .XXX { color: #E50000; background: white; border: solid red; padding: 0.5em; margin: 1em 0; }
   .XXX > :first-child { margin-top: 0; }
   p .XXX { line-height: 3em; }
   .annotation { border: solid thin black; background: #0C479D; color: white; position: relative; margin: 8px 0 20px 0; }
   .annotation:before { position: absolute; left: 0; top: 0; width: 100%; height: 100%; margin: 6px -6px -6px 6px; background: #333333; z-index: -1; content: ''; }
   .annotation :link, .annotation :visited { color: inherit; }
   .annotation :link:hover, .annotation :visited:hover { background: transparent; }
   .annotation span { border: none ! important; }
   .note { color: green; background: transparent; font-family: sans-serif; }
   .warning { color: red; background: transparent; }
   .note, .warning { font-weight: bolder; font-style: italic; }
   .note em, .warning em, .note i, .warning i { font-style: normal; }
   p.note, div.note { padding: 0.5em 2em; }
   span.note { padding: 0 2em; }
   .note p:first-child, .warning p:first-child { margin-top: 0; }
   .note p:last-child, .warning p:last-child { margin-bottom: 0; }
   .warning:before { font-style: normal; }
   p.note:before { content: 'Note: '; }
   p.warning:before { content: '\26A0 Warning! '; }

   .bookkeeping:before { display: block; content: 'Bookkeeping details'; font-weight: bolder; font-style: italic; }
   .bookkeeping { font-size: 0.8em; margin: 2em 0; }
   .bookkeeping p { margin: 0.5em 2em; display: list-item; list-style: square; }
   .bookkeeping dt { margin: 0.5em 2em 0; }
   .bookkeeping dd { margin: 0 3em 0.5em; }

   h4 { position: relative; z-index: 3; }
   h4 + .element, h4 + div + .element { margin-top: -2.5em; padding-top: 2em; }
   .element {
     background: #EEEEFF;
     color: black;
     margin: 0 0 1em 0.15em;
     padding: 0 1em 0.25em 0.75em;
     border-left: solid #9999FF 0.25em;
     position: relative;
     z-index: 1;
   }
   .element:before {
     position: absolute;
     z-index: 2;
     top: 0;
     left: -1.15em;
     height: 2em;
     width: 0.9em;
     background: #EEEEFF;
     content: ' ';
     border-style: none none solid solid;
     border-color: #9999FF;
     border-width: 0.25em;
   }

   .example { display: block; color: #222222; background: #FCFCFC; border-left: double; margin-left: 2em; padding-left: 1em; }
   td > .example:only-child { margin: 0 0 0 0.1em; }

   ul.domTree, ul.domTree ul { padding: 0 0 0 1em; margin: 0; }
   ul.domTree li { padding: 0; margin: 0; list-style: none; position: relative; }
   ul.domTree li li { list-style: none; }
   ul.domTree li:first-child::before { position: absolute; top: 0; height: 0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
   ul.domTree li:not(:last-child)::after { position: absolute; top: 0; bottom: -0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
   ul.domTree span { font-style: italic; font-family: serif; }
   ul.domTree .t1 code { color: purple; font-weight: bold; }
   ul.domTree .t2 { font-style: normal; font-family: monospace; }
   ul.domTree .t2 .name { color: black; font-weight: bold; }
   ul.domTree .t2 .value { color: blue; font-weight: normal; }
   ul.domTree .t3 code, .domTree .t4 code, .domTree .t5 code { color: gray; }
   ul.domTree .t7 code, .domTree .t8 code { color: green; }
   ul.domTree .t10 code { color: teal; }

   body.dfnEnabled dfn { cursor: pointer; }
   .dfnPanel {
     display: inline;
     position: absolute;
     z-index: 10;
     height: auto;
     width: auto;
     padding: 0.5em 0.75em;
     font: small sans-serif, Droid Sans Fallback;
     background: #DDDDDD;
     color: black;
     border: outset 0.2em;
   }
   .dfnPanel * { margin: 0; padding: 0; font: inherit; text-indent: 0; }
   .dfnPanel :link, .dfnPanel :visited { color: black; }
   .dfnPanel p { font-weight: bolder; }
   .dfnPanel * + p { margin-top: 0.25em; }
   .dfnPanel li { list-style-position: inside; }

   #configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
   #configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }

   fieldset { margin: 1em; padding: 0.5em 1em; }
   fieldset > legend + * { margin-top: 0; }
   fieldset > :last-child { margin-bottom: 0; }
   fieldset p { margin: 0.5em 0; }

   .stability {
     position: fixed;
     bottom: 0;
     left: 0; right: 0;
     margin: 0 auto 0 auto;
     width: 50%;
     background: maroon; color: yellow;
     -webkit-border-radius: 1em 1em 0 0;
     -moz-border-radius: 1em 1em 0 0;
     border-radius: 1em 1em 0 0;
     -moz-box-shadow: 0 0 1em #500;
     -webkit-box-shadow: 0 0 1em #500;
     box-shadow: 0 0 1em red;
     padding: 0.5em 1em;
     text-align: center;
   }
   .stability strong {
     display: block;
   }
   .stability input {
     appearance: none; margin: 0; border: 0; padding: 0.25em 0.5em; background: transparent; color: black;
     position: absolute; top: -0.5em; right: 0; font: 1.25em sans-serif; text-align: center;
   }
   .stability input:hover {
     color: white;
     text-shadow: 0 0 2px black;
   }
   .stability input:active {
     padding: 0.3em 0.45em 0.2em 0.55em;
   }
   .stability :link, .stability :visited,
   .stability :link:hover, .stability :visited:hover {
     background: transparent;
     color: white;
   }

  </style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css"><meta content="noindex" name="robots"><style type="text/css">

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies tbody th { whitespace: nowrap; }
   .applies td { text-align: center; }
   .applies .yes { background: yellow; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .details-example img { vertical-align: top; }

   #base64-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 6em;
     column-count: 5;
     column-gap: 1em;
     -moz-column-width: 6em;
     -moz-column-count: 5;
     -moz-column-gap: 1em;
     -webkit-column-width: 6em;
     -webkit-column-count: 5;
     -webkit-column-gap: 1em;
   }
   #base64-table thead { display: none; }
   #base64-table * { border: none; }
   #base64-table tbody td:first-child:after { content: ':'; }
   #base64-table tbody td:last-child { text-align: right; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   @font-face {
     font-family: 'Essays1743';
     src: url('../fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('../fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('../fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('../fonts/Essays1743-BoldItalic.ttf');
   }

  </style><link href="data:text/css," id="complete" rel="stylesheet" title="Complete specification"><link href="data:text/css,.impl%20%7B%20display:%20none;%20%7D%0Ahtml%20%7B%20border:%20solid%20yellow;%20%7D%20.domintro:before%20%7B%20display:%20none;%20%7D" id="author" rel="alternate stylesheet" title="Author documentation only"><link href="data:text/css,.impl%20%7B%20background:%20%23FFEEEE;%20%7D%20.domintro:before%20%7B%20background:%20%23FFEEEE;%20%7D" id="highlight" rel="alternate stylesheet" title="Highlight implementation requirements"><script>
   function getCookie(name) {
     var params = location.search.substr(1).split("&");
     for (var index = 0; index < params.length; index++) {
       if (params[index] == name)
         return "1";
       var data = params[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     var cookies = document.cookie.split("; ");
     for (var index = 0; index < cookies.length; index++) {
       var data = cookies[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     return null;
   }
  </script><link href="textFieldSelection.html" title="4.10.20 APIs for the text field selections" rel="prev">
  <link href="spec.html#contents" title="Table of contents" rel="contents">
  <link href="interactive-elements.html" title="4.11 Interactive elements" rel="next">
  </head><body onload="fixBrokenLink();" class="split chapter"><div class="head" id="head">
   <p><a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a></p>

   <h1>HTML5</h1>
   <h2 class="no-num no-toc" id="a-vocabulary-and-associated-apis-for-html-and-xhtml">A vocabulary and associated APIs for HTML and XHTML</h2>
   <h2 class="no-num no-toc" id="w3c-working-draft-11-october-2012">W3C Working Draft 11 October 2012</h2>
   </div>
   <div class="prev_next">
   <a href="textFieldSelection.html">&#8592; 4.10.20 APIs for the text field selections</a> &#8211;
   <a href="spec.html#contents">Table of contents</a> &#8211;
   <a href="interactive-elements.html">4.11 Interactive elements &#8594;</a>
  <ol class="toc"><li><ol><li><ol><li><a href="constraints.html#constraints"><span class="secno">4.10.21 </span>Constraints</a>
      <ol><li><a href="constraints.html#definitions"><span class="secno">4.10.21.1 </span>Definitions</a></li><li><a href="constraints.html#constraint-validation"><span class="secno">4.10.21.2 </span>Constraint validation</a></li><li><a href="constraints.html#the-constraint-validation-api"><span class="secno">4.10.21.3 </span>The constraint validation API</a></li><li><a href="constraints.html#security-forms"><span class="secno">4.10.21.4 </span>Security</a></li></ol></li><li><a href="constraints.html#form-submission-0"><span class="secno">4.10.22 </span>Form submission</a>
      <ol><li><a href="constraints.html#introduction-2"><span class="secno">4.10.22.1 </span>Introduction</a></li><li><a href="constraints.html#implicit-submission"><span class="secno">4.10.22.2 </span>Implicit submission</a></li><li><a href="constraints.html#form-submission-algorithm"><span class="secno">4.10.22.3 </span>Form submission algorithm</a></li><li><a href="constraints.html#constructing-form-data-set"><span class="secno">4.10.22.4 </span>Constructing the form data set</a></li><li><a href="constraints.html#url-encoded-form-data"><span class="secno">4.10.22.5 </span>URL-encoded form data</a></li><li><a href="constraints.html#multipart-form-data"><span class="secno">4.10.22.6 </span>Multipart form data</a></li><li><a href="constraints.html#plain-text-form-data"><span class="secno">4.10.22.7 </span>Plain text form data</a></li></ol></li><li><a href="constraints.html#resetting-a-form"><span class="secno">4.10.23 </span>Resetting a form</a></li></ol></li></ol></li></ol></div>

  <h4 id="constraints"><span class="secno">4.10.21 </span>Constraints</h4>

  <h5 id="definitions"><span class="secno">4.10.21.1 </span>Definitions</h5>

  <div class="impl">

  <p>A <a href="forms.html#category-submit" title="category-submit">submittable element</a> is a
  <dfn id="candidate-for-constraint-validation">candidate for constraint validation</dfn> except when a
  condition has <dfn id="barred-from-constraint-validation" title="barred from constraint validation">barred
  the element from constraint validation</dfn>. (For example, an
  element is <a href="#barred-from-constraint-validation">barred from constraint validation</a> if it is
  an <code><a href="the-object-element.html#the-object-element">object</a></code> element.)</p>

  <p>An element can have a <dfn id="custom-validity-error-message">custom validity error message</dfn>
  defined. Initially, an element must have its <a href="#custom-validity-error-message">custom validity
  error message</a> set to the empty string. When its value is not
  the empty string, the element is <a href="#suffering-from-a-custom-error">suffering from a custom
  error</a>. It can be set using the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
  method. The user agent should use the <a href="#custom-validity-error-message">custom validity error
  message</a> when alerting the user to the problem with the
  control.</p>

  <p>An element can be constrained in various ways. The following is
  the list of <dfn id="validity-states">validity states</dfn> that a form control can be
  in, making the control invalid for the purposes of constraint
  validation. (The definitions below are non-normative; other parts of
  this specification define more precisely when each state applies or
  does not.)</p>

  <dl><dt> <dfn id="suffering-from-being-missing">Suffering from being missing</dfn> </dt>

   <dd> <p>When a control has no <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> but has a <code title="">required</code> attribute (<code><a href="the-input-element.html#the-input-element">input</a></code> <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code>, <code><a href="the-select-element.html#the-select-element">select</a></code>
   <code title="attr-select-required"><a href="the-select-element.html#attr-select-required">required</a></code>,
   <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> <code title="attr-textarea-required"><a href="the-textarea-element.html#attr-textarea-required">required</a></code>), or, in the case of
   an element in a <i><a href="states-of-the-type-attribute.html#radio-button-group">radio button group</a></i>, any of the other
   elements in the group has a <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code> attribute. </p></dd>

   <dt> <dfn id="suffering-from-a-type-mismatch">Suffering from a type mismatch</dfn> </dt>

   <dd> <p>When a control that allows arbitrary user
   input has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is not
   in the correct syntax (<a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a>, <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>). </p></dd>

   <dt> <dfn id="suffering-from-a-pattern-mismatch">Suffering from a pattern mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that doesn't satisfy the
   <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">pattern</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-being-too-long">Suffering from being too long</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too long for the
   <a href="attributes-common-to-form-controls.html#attr-fe-maxlength" title="attr-fe-maxlength">form control <code title="">maxlength</code> attribute</a> (<code><a href="the-input-element.html#the-input-element">input</a></code>
   <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code>,
   <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> <code title="attr-textarea-maxlength"><a href="the-textarea-element.html#attr-textarea-maxlength">maxlength</a></code>). </p></dd>

   <dt> <dfn id="suffering-from-an-underflow">Suffering from an underflow</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too low for the <code title="attr-input-min"><a href="common-input-element-attributes.html#attr-input-min">min</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-an-overflow">Suffering from an overflow</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that is too high for the
   <code title="attr-input-max"><a href="common-input-element-attributes.html#attr-input-max">max</a></code> attribute.</p></dd>

   <dt> <dfn id="suffering-from-a-step-mismatch">Suffering from a step mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> that doesn't fit the rules
   given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code>
   attribute.</p></dd>

   <dt> <dfn id="suffering-from-a-custom-error">Suffering from a custom error</dfn> </dt>

   <dd> <p>When a control's <a href="#custom-validity-error-message">custom validity error
   message</a> (as set by the element's <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
   method) is not the empty string.</p> </dd>

  </dl><p class="note">An element can still suffer from these states even
  when the element is <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>; thus these states can
  be represented in the DOM even if validating the form during
  submission wouldn't indicate a problem to the user.</p>

  <p>An element <dfn id="concept-fv-valid" title="concept-fv-valid">satisfies its
  constraints</dfn> if it is not suffering from any of the above
  <a href="#validity-states">validity states</a>.</p>

  </div>



  <div class="impl">

  <h5 id="constraint-validation"><span class="secno">4.10.21.2 </span>Constraint validation</h5>

  <p>When the user agent is required to <dfn id="statically-validate-the-constraints">statically validate the
  constraints</dfn> of <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var>, it must run the following steps, which return
  either a <i>positive</i> result (all the controls in the form are
  valid) or a <i>negative</i> result (there are invalid controls)
  along with a (possibly empty) list of elements that are invalid and
  for which no script has claimed responsibility:</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable elements</a> whose
   <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</p></li>

   <li><p>Let <var title="">invalid controls</var> be an initially
   empty list of elements.</p></li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">controls</var>, in <a href="infrastructure.html#tree-order">tree order</a>, run the
    following substeps:</p>

    <ol><li><p>If <var title="">field</var> is not a <a href="#candidate-for-constraint-validation">candidate for
     constraint validation</a>, then move on to the next
     element.</p></li>

     <li><p>Otherwise, if <var title="">field</var> <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>, then
     move on to the next element.</p></li>

     <li><p>Otherwise, add <var title="">field</var> to <var title="">invalid controls</var>.</p></li>

    </ol></li>

   <li><p>If <var title="">invalid controls</var> is empty, then
   return a <i>positive</i> result and abort these steps.</p></li>

   <li><p>Let <var title="">unhandled invalid controls</var> be an
   initially empty list of elements.</p></li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">invalid controls</var>, if any, in <a href="infrastructure.html#tree-order">tree
    order</a>, run the following substeps:</p>

    <ol><li><p><a href="webappapis.html#fire-a-simple-event">Fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable at <var title="">field</var>.</p></li>

     <li><p>If the event was not canceled, then add <var title="">field</var> to <var title="">unhandled invalid
     controls</var>.</p></li>

    </ol></li>

   <li><p>Return a <i>negative</i> result with the list of elements in
   the <var title="">unhandled invalid controls</var> list.</p></li>

  </ol><p>If a user agent is to <dfn id="interactively-validate-the-constraints">interactively validate the
  constraints</dfn> of <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var>, then the user agent must run the following
  steps:</p>

  <ol><li><p><a href="#statically-validate-the-constraints">Statically validate the constraints</a> of <var title="">form</var>, and let <var title="">unhandled invalid
   controls</var> be the list of elements returned if the result was
   <i>negative</i>.</p></li>

   <li><p>If the result was <i>positive</i>, then return that result
   and abort these steps.</p></li>

   <li><p>Report the problems with the constraints of at least one of
   the elements given in <var title="">unhandled invalid
   controls</var> to the user. User agents may focus one of those
   elements in the process, by running the <a href="editing.html#focusing-steps">focusing steps</a>
   for that element, and may change the scrolling position of the
   document, or perform some other action that brings the element to
   the user's attention. User agents may report more than one
   constraint violation. User agents may coalesce related constraint
   violation reports if appropriate (e.g. if multiple radio buttons in
   a <a href="states-of-the-type-attribute.html#radio-button-group" title="radio button group">group</a> are marked as
   required, only one error need be reported). If one of the controls
   is not <a href="rendering.html#being-rendered">being rendered</a> (e.g. it has the <code title="attr-hidden"><a href="editing.html#the-hidden-attribute">hidden</a></code> attribute set) then user agents
   may report a script error.</p></li>

   <li><p>Return a <i>negative</i> result.</p></li>

  </ol></div>



<!--TOPIC:DOM APIs-->
  <h5 id="the-constraint-validation-api"><span class="secno">4.10.21.3 </span>The <dfn>constraint validation API</dfn></h5>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-cva-willValidate"><a href="#dom-cva-willvalidate">willValidate</a></code></dt>

   <dd>

    <p>Returns true if the element will be validated when the form is submitted; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity</a></code>(<var title="">message</var>)</dt>

   <dd>

    <p>Sets a custom error, so that the element would fail to
    validate. The given message is the message to be shown to the user
    when reporting the problem to the user.</p>

    <p>If the argument is the empty string, clears the custom error.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valueMissing"><a href="#dom-validitystate-valuemissing">valueMissing</a></code></dt>

   <dd>

    <p>Returns true if the element has no value but is a required field; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-typeMismatch"><a href="#dom-validitystate-typemismatch">typeMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value is not in the correct syntax; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-patternMismatch"><a href="#dom-validitystate-patternmismatch">patternMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't match the provided pattern; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-tooLong"><a href="#dom-validitystate-toolong">tooLong</a></code></dt>

   <dd>

    <p>Returns true if the element's value is longer than the provided maximum length; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeUnderflow"><a href="#dom-validitystate-rangeunderflow">rangeUnderflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is lower than the provided minimum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeOverflow"><a href="#dom-validitystate-rangeoverflow">rangeOverflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is higher than the provided maximum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-stepMismatch"><a href="#dom-validitystate-stepmismatch">stepMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't fit the rules given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code> attribute; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-customError"><a href="#dom-validitystate-customerror">customError</a></code></dt>

   <dd>

    <p>Returns true if the element has a custom error; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valid"><a href="#dom-validitystate-valid">valid</a></code></dt>

   <dd>

    <p>Returns true if the element's value has no validity problems; false otherwise.</p>

   </dd>

   <dt><var title="">valid</var> = <var title="">element</var> . <code title="dom-cva-checkValidity"><a href="#dom-cva-checkvalidity">checkValidity</a></code>()</dt>

   <dd>

    <p>Returns true if the element's value has no validity problems;
    false otherwise. Fires an <code title="event-invalid">invalid</code> event at the element in the
    latter case.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validationMessage"><a href="#dom-cva-validationmessage">validationMessage</a></code></dt>

   <dd>

    <p>Returns the error message that would be shown to the user if
    the element was to be checked for validity.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-cva-willvalidate" title="dom-cva-willValidate"><code>willValidate</code></dfn>
  attribute must return true if an element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a>, and false otherwise (i.e. false if any
  conditions are <a href="#barred-from-constraint-validation" title="barred from constraint
  validation">barring it from constraint validation</a>).</p>

  <p>The <dfn id="dom-cva-setcustomvalidity" title="dom-cva-setCustomValidity"><code>setCustomValidity(<var title="">message</var>)</code></dfn>, when invoked, must set the
  <a href="#custom-validity-error-message">custom validity error message</a> to the value of the given
  <var title="">message</var> argument.</p>

  </div>

  <div class="example">

   <p>In the following example, a script checks the value of a form
   control each time it is edited, and whenever it is not a valid
   value, uses the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code> method
   to set an appropriate message.</p>

   <pre>&lt;label&gt;Feeling: &lt;input name=f type="text" oninput="check(this)"&gt;&lt;/label&gt;
&lt;script&gt;
 function check(input) {
   if (input.value == "good" ||
       input.value == "fine" ||
       input.value == "tired") {
     input.setCustomValidity('"' + input.value + '" is not a feeling.');
<!--   } else if (input.value == "...") {
     input.setCustomValidity('...');
-->   } else {
     // input is fine -- reset the error message
     input.setCustomValidity('');
   }
 }
&lt;/script&gt;</pre>

  </div>

  <div class="impl">

  <p>The <dfn id="dom-cva-validity" title="dom-cva-validity"><code>validity</code></dfn>
  attribute must return a <code><a href="#validitystate">ValidityState</a></code> object that
  represents the <a href="#validity-states">validity states</a> of the element. This
  object is <a href="infrastructure.html#live">live</a>, and the same object must be returned
  each time the element's <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> attribute is retrieved.</p>

<pre class="idl">interface <dfn id="validitystate">ValidityState</dfn> {
  readonly attribute boolean <a href="#dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing">valueMissing</a>;
  readonly attribute boolean <a href="#dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch">typeMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch">patternMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-toolong" title="dom-ValidityState-tooLong">tooLong</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow">rangeUnderflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow">rangeOverflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch">stepMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-customerror" title="dom-ValidityState-customError">customError</a>;
  readonly attribute boolean <a href="#dom-validitystate-valid" title="dom-ValidityState-valid">valid</a>;
};</pre>

  <p>A <code><a href="#validitystate">ValidityState</a></code> object has the following
  attributes. On getting, they must return true if the corresponding
  condition given in the following list is true, and false
  otherwise.</p>

  <dl><dt><dfn id="dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing"><code>valueMissing</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-missing">suffering from being missing</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch"><code>typeMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-type-mismatch">suffering from a type mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch"><code>patternMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-pattern-mismatch">suffering from a pattern mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-toolong" title="dom-ValidityState-tooLong"><code>tooLong</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-too-long">suffering from being too long</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow"><code>rangeUnderflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-underflow">suffering from an underflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow"><code>rangeOverflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-overflow">suffering from an overflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch"><code>stepMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-step-mismatch">suffering from a step mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-customerror" title="dom-ValidityState-customError"><code>customError</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-custom-error">suffering from a custom error</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-valid" title="dom-ValidityState-valid"><code>valid</code></dfn></dt>
   <dd> <p>None of the other conditions are true.</p> </dd>

  </dl><p>When the <dfn id="dom-cva-checkvalidity" title="dom-cva-checkValidity"><code>checkValidity()</code></dfn>
  method is invoked, if the element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a> and does not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy its constraints</a>, the user
  agent must <a href="webappapis.html#fire-a-simple-event">fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable (but in this
  case has no default action) at the element and return
  false. Otherwise, it must only return true without doing anything
  else.</p>

  <p>The <dfn id="dom-cva-validationmessage" title="dom-cva-validationMessage"><code>validationMessage</code></dfn>
  attribute must return the empty string if the element is not a
  <a href="#candidate-for-constraint-validation">candidate for constraint validation</a> or if it is one but
  it <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>;
  otherwise, it must return a suitably localized message that the user
  agent would show the user if this were the only form control with a
  validity constraint problem. If the user agent would not actually
  show a textual message in such a situation (e.g. it would show a
  graphical cue instead), then the attribute must return a suitably
  localized message that expresses (one or more of) the validity
  constraint(s) that the control does not satisfy. If the element is a
  <a href="#candidate-for-constraint-validation">candidate for constraint validation</a> and is
  <a href="#suffering-from-a-custom-error">suffering from a custom error</a>, then the <a href="#custom-validity-error-message">custom
  validity error message</a> should be present in the return
  value.</p>

  </div>
<!--TOPIC:HTML-->


<!--ADD-TOPIC:Security-->
  <h5 id="security-forms"><span class="secno">4.10.21.4 </span>Security</h5>

  <p id="security-0">Servers should not rely on client-side
  validation. Client-side validation can be intentionally bypassed by
  hostile users, and unintentionally bypassed by users of older user
  agents or automated tools that do not implement these features. The
  constraint validation features are only intended to improve the user
  experience, not to provide any kind of security mechanism.</p>
<!--REMOVE-TOPIC:Security-->




  <h4 id="form-submission-0"><span class="secno">4.10.22 </span><dfn>Form submission</dfn></h4>

  <div class="impl">

  <h5 id="introduction-2"><span class="secno">4.10.22.1 </span>Introduction</h5>

  </div>

  <p><i>This section is non-normative.</i></p>
  <p>When a form is submitted, the data in the form is converted into
  the structure specified by the <a href="form-submission.html#concept-fs-enctype" title="concept-fs-enctype">enctype</a>, and then sent to the
  destination specified by the <a href="form-submission.html#concept-fs-action" title="concept-fs-action">action</a> using the given <a href="form-submission.html#concept-fs-method" title="concept-fs-method">method</a>.</p>

  <p>For example, take the following form:</p>

  <pre>&lt;form action="/find.cgi" method=get&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>If the user types in "cats" in the first field and "fur" in the
  second, and then hits the submit button, then the user agent will
  load <code title="">/find.cgi?t=cats&amp;q=fur</code>.</p>

  <p>On the other hand, consider this form:</p>

  <pre>&lt;form action="/find.cgi" method=post enctype="multipart/form-data"&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>Given the same user input, the result on submission is quite
  different: the user agent instead does an HTTP POST to the given
  URL, with as the entity body something like the following text:</p>

  <pre>------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="t"

cats
------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="q"

fur
------kYFrd4jNJEgCervE--</pre>



  <div class="impl">

  <h5 id="implicit-submission"><span class="secno">4.10.22.2 </span>Implicit submission</h5>

  <p>A <code><a href="the-form-element.html#the-form-element">form</a></code> element's <dfn id="default-button">default button</dfn> is the
  first <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> in
  <a href="infrastructure.html#tree-order">tree order</a> whose <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is that
  <code><a href="the-form-element.html#the-form-element">form</a></code> element.</p>

  <p>If the user agent supports letting the user submit a form
  implicitly (for example, on some platforms hitting the "enter" key
  while a text field is focused implicitly submits the form), then
  doing so for a form whose <a href="#default-button">default button</a> has a defined
  <a href="content-models.html#activation-behavior">activation behavior</a> must cause the user agent to
  <a href="content-models.html#run-synthetic-click-activation-steps">run synthetic click activation steps</a> on that
  <a href="#default-button">default button</a>.</p>

  <p class="note">Consequently, if the <a href="#default-button">default button</a> is
  <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>, the form is not
  submitted when such an implicit submission mechanism is used. (A
  button has no <a href="content-models.html#activation-behavior">activation behavior</a> when disabled.)</p>

  <p class="note">There are pages on the Web that are only usable if
  there is a way to implicitly submit forms, so user agents are
  strongly encouraged to support this.</p>

  <p><!-- For Web compatibility reasons caused by obscure historical
  accidents, -->If the form has no <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a>, then the
  implicit submission mechanism must do nothing if the form has more
  than one <i>field that blocks implicit submission</i>, and must
  <a href="#concept-form-submit" title="concept-form-submit">submit</a> the
  <code><a href="the-form-element.html#the-form-element">form</a></code> element from the <code><a href="the-form-element.html#the-form-element">form</a></code> element itself
  otherwise.</p>

  <p>For the purpose of the previous paragraph, an element is a
  <i>field that blocks implicit submission</i> of a <code><a href="the-form-element.html#the-form-element">form</a></code>
  element if it is an <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <a href="association-of-controls-and-forms.html#form-owner">form
  owner</a> is that <code><a href="the-form-element.html#the-form-element">form</a></code> element and whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in one of the
  following states:
  <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a>,
  <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>,
  <a href="states-of-the-type-attribute.html#url-state-(type=url)" title="attr-input-type-url">URL</a>,
  <a href="states-of-the-type-attribute.html#telephone-state-(type=tel)" title="attr-input-type-tel">Telephone</a>,
  <a href="states-of-the-type-attribute.html#e-mail-state-(type=email)" title="attr-input-type-email">E-mail</a>,
  <a href="states-of-the-type-attribute.html#password-state-(type=password)" title="attr-input-type-password">Password</a>,
  <a href="states-of-the-type-attribute.html#date-and-time-state-(type=datetime)" title="attr-input-type-datetime">Date and Time</a>,
  <a href="states-of-the-type-attribute.html#date-state-(type=date)" title="attr-input-type-date">Date</a>,
  <a href="states-of-the-type-attribute.html#month-state-(type=month)" title="attr-input-type-month">Month</a>,
  <a href="states-of-the-type-attribute.html#week-state-(type=week)" title="attr-input-type-week">Week</a>,
  <a href="states-of-the-type-attribute.html#time-state-(type=time)" title="attr-input-type-time">Time</a>,
  <a href="states-of-the-type-attribute.html#local-date-and-time-state-(type=datetime-local)" title="attr-input-type-datetime-local">Local Date and Time</a>,
  <a href="states-of-the-type-attribute.html#number-state-(type=number)" title="attr-input-type-number">Number</a>
  </p>

  </div>


  <div class="impl">

  <h5 id="form-submission-algorithm"><span class="secno">4.10.22.3 </span>Form submission algorithm</h5>

  <p>When a <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var> is <dfn id="concept-form-submit" title="concept-form-submit">submitted</dfn> from an element <var title="">submitter</var> (typically a button), optionally with a
  <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag set, the
  user agent must run the following steps:</p>

  <ol><li><p>Let <var title="">form document</var> be the <var title="">form</var>'s <code><a href="dom.html#document">Document</a></code>.</p></li>

   <li id="sandboxSubmitBlocked"><p>If <var title="">form
   document</var> has no associated <a href="browsers.html#browsing-context">browsing context</a> or
   its <a href="browsers.html#active-sandboxing-flag-set">active sandboxing flag set</a> has its
   <a href="browsers.html#sandboxed-forms-browsing-context-flag">sandboxed forms browsing context flag</a> set, then abort
   these steps without doing anything.</p></li>

   <li><p>Let <var title="">form browsing context</var> be the
   <a href="browsers.html#browsing-context">browsing context</a> of <var title="">form
   document</var>.</p></li>

   <li><p>If <var title="">form</var> is already being submitted
   (i.e. the form was <a href="#concept-form-submit" title="concept-form-submit">submitted</a> again while processing
   the events fired from the next two steps, probably from a script
   redundantly calling the <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method on <var title="">form</var>), then abort these steps. This doesn't affect
   the earlier instance of this algorithm.</p></li>

   <!-- lock (implicit in previous step) -->

   <li><p>If the <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag is not
   set, and the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-novalidate" title="concept-fs-novalidate">no-validate state</a> is false,
   then <a href="#interactively-validate-the-constraints">interactively validate the constraints</a> of <var title="">form</var> and examine the result: if the result is
   negative (the constraint validation concluded that there were
   invalid fields and probably informed the user of this) then abort
   these steps.</p></li>

   <li><p>If the <var title="">submitted from <code title="dom-form-submit"><a href="the-form-element.html#dom-form-submit">submit()</a></code> method</var> flag is not
   set, then <a href="webappapis.html#fire-a-simple-event">fire a simple event</a> that is cancelable named
   <code title="event-submit">submit</code>, at <var title="">form</var>. If the event's default action is prevented
   (i.e. if the event is canceled) then abort these steps. Otherwise,
   continue (effectively the default action is to perform the
   submission).</p></li>

   <!-- if you add any steps between the "lock" and "unlock" lines,
   make sure to update the step immediately before the "lock" line -->

   <!-- unlock -->

   <li><p>Let <var title="">form data set</var> be the result of
   <a href="#constructing-the-form-data-set">constructing the form data set</a> for <var title="">form</var> in the context of <var title="">submitter</var>.</p></li>

   <li><p>Let <var title="">action</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-action" title="concept-fs-action">action</a>.</p></li>

   <li>

    <p>If <var title="">action</var> is the empty string, let <var title="">action</var> be <a href="dom.html#the-document's-address">the document's address</a> of
    the <var title="">form document</var>.</p>

    <p class="note">This step is a <a href="introduction.html#willful-violation">willful violation</a> of
    RFC 3986, which would require base URL processing here. This
    violation is motivated by a desire for compatibility with legacy
    content. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

    <!-- Don't ask me why. But that's what IE does. It even treats
    action="" differently from action=" " or action="#" (the latter
    two resolve to the base URL, the first one resolves to the doc
    URL). And other browsers concur. It is even required, see e.g.
      http://bugs.webkit.org/show_bug.cgi?id=7763
      https://bugzilla.mozilla.org/show_bug.cgi?id=297761
    -->

   </li>

   <li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the
   <a href="urls.html#url">URL</a> <var title="">action</var>, relative to the <var title="">submitter</var> element. If this fails, abort these
   steps. Otherwise, let <var title="">action</var> be the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

   <li><p>Let <var title="">scheme</var> be the <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> of the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</p></li>

   <li><p>Let <var title="">enctype</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-enctype" title="concept-fs-enctype">enctype</a>.</p></li>

   <li><p>Let <var title="">method</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-method" title="concept-fs-method">method</a>.</p></li>

   <li><p>Let <var title="">target</var> be the <var title="">submitter</var> element's <a href="form-submission.html#concept-fs-target" title="concept-fs-target">target</a>.</p></li>

   <li><p>If the user indicated a specific <a href="browsers.html#browsing-context">browsing
   context</a> to use when submitting the form, then let <var title="">target browsing context</var> be that <a href="browsers.html#browsing-context">browsing
   context</a>. Otherwise, apply <a href="browsers.html#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a
   browsing context given a browsing context name</a> using <var title="">target</var> as the name and <var title="">form browsing
   context</var> as the context in which the algorithm is executed,
   and let <var title="">target browsing context</var> be the
   resulting <a href="browsers.html#browsing-context">browsing context</a>.</p></li>

   <li><p>If <var title="">target browsing context</var> was created
   in the previous step, or if the <var title="">form document</var>
   has not yet <a href="the-end.html#completely-loaded">completely loaded</a>, then let <var title="">replace</var> be true. Otherwise, let it be
   false.</p></li>

   <li>

<!--FORM-DIALOG-->

    <p>Otherwise, select the appropriate row in the table below based
    on the value of <var title="">scheme</var> as given by the first
    cell of each row. Then, select the appropriate cell on that row
    based on the value of <var title="">method</var> as given in the
    first cell of each column. Then, jump to the steps named in that
    cell and defined below the table.</p>

    <table><thead><tr><td>
      </td><th> <a href="form-submission.html#attr-fs-method-get" title="attr-fs-method-GET">GET</a>
      </th><th> <a href="form-submission.html#attr-fs-method-post" title="attr-fs-method-POST">POST</a>
     </th></tr></thead><tbody><tr><th> <code title="">http</code>
      </th><td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action URL</a>
      </td><td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
     </td></tr><tr><th> <code title="">https</code>
      </th><td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action URL</a>
      </td><td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
     </td></tr><tr><th> <code title="">ftp</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
     </td></tr><tr><th> <code title="">javascript</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
     </td></tr><tr><th> <code title="">data</code>
      </th><td> <a href="#submit-get-action" title="submit-get-action">Get action URL</a>
      </td><td> <a href="#submit-data-post" title="submit-data-post">Post to data:</a>
     </td></tr><tr><th> <code title="">mailto</code>
      </th><td> <a href="#submit-mailto-headers" title="submit-mailto-headers">Mail with headers</a>
      </td><td> <a href="#submit-mailto-body" title="submit-mailto-body">Mail as body</a>
    </td></tr></tbody></table><p>If <var title="">scheme</var> is not one of those listed in
    this table, then the behavior is not defined by this
    specification. User agents should, in the absence of another
    specification defining this, act in a manner analogous to that
    defined in this specification for similar schemes.</p>

    <p>The behaviors are as follows:</p>

    <dl><dt><dfn id="submit-mutate-action" title="submit-mutate-action">Mutate action URL</dfn>
     </dt><dd>

      <p>Let <var title="">query</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <!-- by this point we've already tried to resolve the URL, so we
      know we can parse it -->

      <p>Let <var title="">destination</var> be a new <a href="urls.html#url">URL</a>
      that is equal to the <var title="">action</var> except that its
      <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a> component is
      replaced by <var title="">query</var> (adding a "?" (U+003F) character if appropriate).</p>

      <p><a href="history.html#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-body" title="submit-body">Submit as entity body</dfn>
     </dt><dd>

      <p>Let <var title="">entity body</var> be the result of encoding
      the <var title="">form data set</var> using the
      <a href="#appropriate-form-encoding-algorithm">appropriate form encoding algorithm</a>.</p>

      <p>Let <var title="">MIME type</var> be determined as
      follows:</p>

      <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">application/x-www-form-urlencoded</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

       <dd>Let <var title="">MIME type</var> be the concatenation of
       the string "<code title="">multipart/form-data;</code>", a
       U+0020 SPACE character, the string "<code title="">boundary=</code>", and the <a href="#multipart/form-data-boundary-string"><code title="">multipart/form-data</code> boundary string</a>
       generated by the <a href="#multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
       algorithm</a>.</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">text/plain</code>".</dd>

      </dl><!--<p>If <var title="">method</var> is anything but (GET or)
      POST, and the <span>origin</span> of <var title="">action</var>
      is not the <span>same origin</span> as that of <var
      title="">form document</var>, then abort these steps.</p> [or do
      CORS] (this is commented out since only POST can trigger this
      now, and that's historically unrestricted)--><p>Otherwise, <a href="history.html#navigate">navigate</a><!--DONAV form--> <var title="">target browsing context</var> to <var title="">action</var> using the HTTP method given by <var title="">method</var> and with <var title="">entity body</var>
      as the entity body, of type <var title="">MIME type</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-get-action" title="submit-get-action">Get action URL</dfn>
     </dt><dd>

      <p><a href="history.html#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">action</var>. If <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-data-post" title="submit-data-post">Post to data:</dfn>
     </dt><dd>

      <p>Let <var title="">data</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a>.</p>

      <p>If <var title="">action</var> contains the string "<code title="">%%%%</code>" (four U+0025 PERCENT SIGN characters),
      then %-escape all bytes in <var title="">data</var> that, if
      interpreted as US-ASCII, do not match the <code title="">unreserved</code> production in the URI Generic Syntax,
      and then, treating the result as a US-ASCII string, further
      %-escape all the U+0025 PERCENT SIGN characters in the resulting
      string and replace the first occurrence of "<code title="">%%%%</code>" in <var title="">action</var> with the
      resulting double-escaped string. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p>Otherwise, if <var title="">action</var> contains the string
      "<code title="">%%</code>" (two U+0025 PERCENT SIGN characters
      in a row, but not four), then %-escape all characters in <var title="">data</var> that, if interpreted as US-ASCII, do not
      match the <code title="">unreserved</code> production in the URI
      Generic Syntax, and then, treating the result as a US-ASCII
      string, replace the first occurrence of "<code title="">%%</code>" in <var title="">action</var> with the
      resulting escaped string. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p><a href="history.html#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to the potentially modified <var title="">action</var> (which will be a <a href="infrastructure.html#data-protocol" title="data
      protocol"><code title="">data:</code> URL</a>). If <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-headers" title="submit-mailto-headers">Mail with headers</dfn>
     </dt><dd>

      <p>Let <var title="">headers</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <p>Replace occurrences of "+" (U+002B) characters in
      <var title="">headers</var> with the string "<code title="">%20</code>".</p>

      <p>Let <var title="">destination</var> consist of all the
      characters from the first character in <var title="">action</var> to the character immediately before the
      first "?" (U+003F) character, if any, or the end of
      the string if there are none.</p>

      <p>Append a single "?" (U+003F) character to <var title="">destination</var>.</p>

      <p>Append <var title="">headers</var> to <var title="">destination</var>.</p>

      <p><a href="history.html#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-body" title="submit-mailto-body">Mail as body</dfn>
     </dt><dd>

      <p>Let <var title="">body</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a> and then %-escaping all the bytes
      in the resulting byte string that, when interpreted as US-ASCII,
      do not match the <code title="">unreserved</code> production in
      the URI Generic Syntax. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p>Let <var title="">destination</var> have the same value as
      <var title="">action</var>.</p>

      <p>If <var title="">destination</var> does not contain a "?" (U+003F) character, append a single "?" (U+003F) character to <var title="">destination</var>. Otherwise, append a single U+0026
      AMPERSAND character (&amp;).</p>

      <p>Append the string "<code title="">body=</code>" to <var title="">destination</var>.</p>

      <p>Append <var title="">body</var>, interpreted as a US-ASCII
      string, to <var title="">destination</var>.</p>

      <p><a href="history.html#navigate">Navigate</a><!--DONAV form--> <var title="">target
      browsing context</var> to <var title="">destination</var>. If
      <var title="">replace</var> is true, then <var title="">target
      browsing context</var> must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>


<!--FORM-DIALOG-->

    </dl><p>The <dfn id="appropriate-form-encoding-algorithm">appropriate form encoding algorithm</dfn> is
    determined as follows:</p>

    <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="form-submission.html#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

     <dd>Use the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="form-submission.html#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

     <dd>Use the <a href="#multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="form-submission.html#attr-fs-enctype-text">text/plain</a></code></dt>

     <dd>Use the <a href="#text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
     algorithm</a>.</dd>

    </dl></li>

  </ol><h5 id="constructing-form-data-set"><span class="secno">4.10.22.4 </span>Constructing the form data set</h5>

  <p>The algorithm to <dfn id="constructing-the-form-data-set" title="constructing the form data
  set">construct the form data set</dfn> for a form <var title="">form</var> optionally in the context of a submitter <var title="">submitter</var> is as follows. If not specified otherwise,
  <var title="">submitter</var> is null.</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable elements</a> whose
   <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</p></li>

   <li><p>Let the <var title="">form data set</var> be a list of
   name-value-type tuples, initially empty.</p></li>

   <li>

    <p><i>Loop</i>: For each element <var title="">field</var> in <var title="">controls</var>, in <a href="infrastructure.html#tree-order">tree order</a>, run the
    following substeps:</p>

    <ol><li>

      <p>If any of the following conditions are met, then skip these
      substeps for this element:</p>

      <ul><li>The <var title="">field</var> element has a
       <code><a href="the-datalist-element.html#the-datalist-element">datalist</a></code> element ancestor.</li>

       <li>The <var title="">field</var> element is <a href="attributes-common-to-form-controls.html#concept-fe-disabled" title="concept-fe-disabled">disabled</a>.</li>

       <li>The <var title="">field</var> element is a <a href="forms.html#concept-button" title="concept-button">button</a> but it is not <var title="">submitter</var>.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state and
       whose <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state and
       whose <a href="attributes-common-to-form-controls.html#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is not an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state, and
       either the <var title="">field</var> element does not have a
       <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute specified, or
       its <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute's value is
       the empty string.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-object-element.html#the-object-element">object</a></code> element that is not using a
       <a href="infrastructure.html#plugin">plugin</a>.</li>

      </ul><p>Otherwise, process <var title="">field</var> as follows:</p>

     </li>

     <li><p>Let <var title="">type</var> be the value of the <code title="">type</code> IDL attribute of <var title="">field</var>.</p></li> <!-- if the field is an <object>
     element, this will get ignored. -->

     <li>

      <p>If the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#image-button-state-(type=image)" title="attr-input-type-image">Image Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has a <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute specified and its
       value is not the empty string, let <var title="">name</var> be
       that value followed by a single "." (U+002E) character.
       Otherwise, let <var title="">name</var> be the empty
       string.</p></li>

       <li><p>Let <var title="">name<sub title="">x</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single "x" (U+0078) character.</p></li>

       <li><p>Let <var title="">name<sub title="">y</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single "y" (U+0079) character.</p></li>

       <li><p>The <var title="">field</var> element is <var title="">submitter</var>, and before this algorithm was invoked
       the user <a href="states-of-the-type-attribute.html#concept-input-type-image-coordinate" title="concept-input-type-image-coordinate">indicated a
       coordinate</a>. Let <var title="">x</var> be the <var title="">x</var>-component of the coordinate selected by the
       user, and let <var title="">y</var> be the <var title="">y</var>-component of the coordinate selected by the
       user.</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with the name <var title="">name<sub title="">x</sub></var>,
       the value <var title="">x</var>, and the type <var title="">type</var>.</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with the name <var title="">name<sub title="">y</sub></var> and
       the value <var title="">y</var>, and the type <var title="">type</var>.</p></li>

       <li><p>Skip the remaining substeps for this element: if there
       are any more elements in <var title="">controls</var>, return
       to the top of the <i>loop</i> step, otherwise, jump to the
       <i>end</i> step below.</p></li>

      </ol></li>

     <li><p>Let <var title="">name</var> be the value of the <var title="">field</var> element's <code title="attr-fe-name"><a href="attributes-common-to-form-controls.html#attr-fe-name">name</a></code> attribute.</p></li>

     <li><p>If the <var title="">field</var> element is a
     <code><a href="the-select-element.html#the-select-element">select</a></code> element, then for each <code><a href="the-option-element.html#the-option-element">option</a></code>
     element in the <code><a href="the-select-element.html#the-select-element">select</a></code> element whose <a href="the-option-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is true,
     append an entry to the <var title="">form data set</var> with the
     <var title="">name</var> as the name, the <a href="the-option-element.html#concept-option-value" title="concept-option-value">value</a> of the
     <code><a href="the-option-element.html#the-option-element">option</a></code> element as the value, and <var title="">type</var> as the type.</p></li>

     <li>

      <p>Otherwise, if the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#checkbox-state-(type=checkbox)" title="attr-input-type-checkbox">Checkbox</a> state or the
      <a href="states-of-the-type-attribute.html#radio-button-state-(type=radio)" title="attr-input-type-radio">Radio Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has a <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute specified, then
       let <var title="">value</var> be the value of that attribute;
       otherwise, let <var title="">value</var> be the string
       "<code title="">on</code>".</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with <var title="">name</var> as the name, <var title="">value</var> as the value, and <var title="">type</var>
       as the type.</p></li>

      </ol></li>

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">File Upload</a> state, then for
     each file <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected</a> in the
     <code><a href="the-input-element.html#the-input-element">input</a></code> element, append an entry to the <var title="">form data set</var> with the <var title="">name</var> as
     the name, the file (consisting of the name, the type, and the
     body) as the value, and <var title="">type</var> as the type. If
     there are no <a href="states-of-the-type-attribute.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected files</a>,
     then append an entry to the <var title="">form data set</var>
     with the <var title="">name</var> as the name, the empty string
     as the value, and <code>application/octet-stream</code> as the
     type.</p></li>
     <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=529859 -->

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-object-element.html#the-object-element">object</a></code> element: try to obtain a form submission
     value from the <a href="infrastructure.html#plugin">plugin</a><!-- using NPAPI's
     NPP_GetValue() entry point with the NPPVformValue variable -->,
     and if that is successful, append an entry to the <var title="">form data set</var> with <var title="">name</var> as the
     name, the returned form submission value as the value, and the
     string "<code title="">object</code>" as the type.</p></li>

     <li><p>Otherwise, append an entry to the <var title="">form data
     set</var> with <var title="">name</var> as the name, the <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> of the <var title="">field</var> element as the value, and <var title="">type</var> as the type.</p></li>

     <li>

      <p>If the element has a <a href="form-submission.html#form-control-dirname-attribute">form control <code title="">dirname</code> attribute</a>, and that attribute's
      value is not the empty string, then run these substeps:</p>

      <ol><li><p>Let <var title="">dirname</var> be the value of the
       element's <code title="">dirname</code> attribute.</p></li>

       <li><p>Let <var title="">dir</var> be the string "<code title="">ltr</code>" if <a href="global-attributes.html#the-directionality">the directionality</a> of the
       element is '<a href="global-attributes.html#concept-ltr" title="concept-ltr">ltr</a>', and "<code title="">rtl</code>" otherwise (i.e. when <a href="global-attributes.html#the-directionality">the
       directionality</a> of the element is '<a href="global-attributes.html#concept-rtl" title="concept-rtl">rtl</a>').</p></li>

       <li><p>Append an entry to the <var title="">form data set</var>
       with <var title="">dirname</var> as the name, <var title="">dir</var> as the value, and the string "<code title="">direction</code>" as the type.</p></li>

      </ol><p class="note">An element can only have a <a href="form-submission.html#form-control-dirname-attribute">form control
      <code title="">dirname</code> attribute</a> if it is a
      <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code> element or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
      whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
      either the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-text">Text</a> state
      or the <a href="states-of-the-type-attribute.html#text-(type=text)-state-and-search-state-(type=search)" title="attr-input-type-search">Search</a>
      state.</p>

     </li>

    </ol></li>

   <li>

    <p><i>End</i>: For the name of each entry in the <var title="">form data set</var>, and for the value of each entry in
    the <var title="">form data set</var> whose type is not "<code title="">file</code>" or "<code title="">textarea</code>", replace
    every occurrence of a "CR" (U+000D) character not
    followed by a "LF" (U+000A) character, and every
    occurrence of a "LF" (U+000A) character not preceded by a
    "CR" (U+000D) character, by a two-character string
    consisting of a U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF)
    character pair.</p>

    <p class="note">In the case of the <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> of <code><a href="the-textarea-element.html#the-textarea-element">textarea</a></code>
    elements, this newline normalization is already performed during
    the conversion of the control's <a href="the-textarea-element.html#concept-textarea-raw-value" title="concept-textarea-raw-value">raw value</a> into the
    control's <a href="attributes-common-to-form-controls.html#concept-fe-value" title="concept-fe-value">value</a> (which also
    performs any necesary line wrapping). In the case of
    <code><a href="the-input-element.html#the-input-element">input</a></code> elements <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attributes in the <a href="states-of-the-type-attribute.html#file-upload-state-(type=file)" title="attr-input-type-file">File Upload</a> state, the value
    is not normalized.</p>

   </li>

   <li><p>Return the <var title="">form data set</var>.</p></li>

  </ol></div>


  <h5 id="url-encoded-form-data"><span class="secno">4.10.22.5 </span>URL-encoded form data</h5>

  <p class="note">This form data set encoding is in many ways an
  aberrant monstrosity, the result of many years of implementation
  accidents and compromises leading to a set of requirements necessary
  for interoperability, but in no way representing good design
  practices. In particular, readers are cautioned to pay close
  attention to the twisted details involving repeated (and in some
  cases nested) conversions between character encodings and byte
  sequences.</p>

  <div class="impl">

  <p>The <dfn id="application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><!-- the first few steps of this are the same as in the next section --><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <p>If the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute
    that is an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>. If
    none of the encodings are supported, or if none are listed, then
    let the selected character encoding be UTF-8.</p>

    <p>Otherwise, if the <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> is
    an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>, then that is
    the selected character encoding.</p>

    <p>Otherwise, let the selected character encoding be UTF-8.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>"
     and its type is "<code title="">hidden</code>", replace its value
     with <var title="">charset</var>.</p></li>

     <li><p>If the entry's type is "<code title="">file</code>",
     replace its value with the file's filename only.</p></li> <!--
     this is not present in the next section -->

     <li><p>For each character in the entry's name and value that
     cannot be expressed using the selected character encoding,
     replace the character by a string consisting of a U+0026
     AMPERSAND character (&amp;), a "#" (U+0023) character,
     one or more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a> representing the Unicode code point of the
     character in base ten, and finally a U+003B SEMICOLON character
     (;).</p></li><!-- we should say it should be the shortest
     possible string, no leading zeros. this whole step is asinine,
     though, so... -->

     <!-- this is where the similarities with the next section end -->

     <li>

      <p>Encode the entry's name and value using the selected
      character encoding. The entry's name and value are now byte
      strings.</p>

     </li>

     <li>

      <p>For each byte in the entry's name and value, apply the
      appropriate subsubsteps from the following list:</p>

      <dl class="switch"><dt>The byte is 0x20 (U+0020 SPACE if interpreted as ASCII)</dt>

       <dd>Replace the byte with a single 0x2B byte ("+" (U+002B) character if interpreted as ASCII).</dd>


       <!-- * - . 0-9 a-z _ A-Z -->

       <dt>If the byte is in the range 0x2A, 0x2D, 0x2E, 0x30 to 0x39,
       0x41 to 0x5A, 0x5F, 0x61 to 0x7A</dt>

       <dd><p>Leave the byte as is.</p></dd>


       <dt>Otherwise</dt>

       <dd>

        <ol><li><p>Let <var title="">s</var> be a string consisting of a
         "%" (U+0025) character followed by two characters
         in the ranges <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>
         and U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL
         LETTER F representing the hexadecimal value of the byte in
         question (zero-padded if necessary).</p></li>

         <li><p>Encode the string <var title="">s</var> as US-ASCII,
         so that it is now a byte string.</p>

         </li><li><p>Replace the byte in question in the name or value
         being processed by the bytes in <var title="">s</var>,
         preserving their relative order.</p></li>

        </ol></dd>

      </dl></li>

     <li>

      <p>Interpret the entry's name and value as Unicode strings
      encoded in US-ASCII. (All of the bytes in the string will be in
      the range 0x00 to 0x7F; the high bit will be zero throughout.)
      The entry's name and value are now Unicode strings again.</p>

     </li>

     <li><p>If the entry's name is "<code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code>", its type is "<code title="">text</code>", and this is the first entry in the <var title="">form data set</var>, then append the value to <var title="">result</var> and skip the rest of the substeps for this
     entry, moving on to the next entry, if any, or the next step in
     the overall algorithm otherwise.</p></li>

     <li><p>If this is not the first entry, append a single U+0026
     AMPERSAND character (&amp;) to <var title="">result</var>.</p></li>

     <li><p>Append the entry's name to <var title="">result</var>.</p></li>

     <li><p>Append a single "=" (U+003D) character to <var title="">result</var>.</p></li>

     <li><p>Append the entry's value to <var title="">result</var>.</p></li>

    </ol></li>

   <li><p>Encode <var title="">result</var> as US-ASCII and return the
   resulting byte stream.</p></li>

  </ol></div>

  <p>To <dfn id="application/x-www-form-urlencoded-decoding-algorithm" title="application/x-www-form-urlencoded decoding
  algorithm">decode <code>application/x-www-form-urlencoded</code>
  payloads</dfn>, the following algorithm should be used. This
  algorithm uses as inputs the payload itself, <var title="">payload</var>, consisting of a Unicode string using only
  characters in the range U+0000 to U+007F; a default character
  encoding <var title="">encoding</var>; and optionally an <var title="">isindex</var> flag indicating that the payload is to be
  processed as if it had been generated for a form containing an <code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code> control. The output of
  this algorithm is a sorted list of name-value pairs. If the <var title="">isindex</var> flag is set and the first control really was
  an <code title="attr-fe-name-isindex"><a href="attributes-common-to-form-controls.html#attr-fe-name-isindex">isindex</a></code> control, then
  the first name-value pair will have as its name the empty
  string.</p>

  <ol><li><p>Let <var title="">strings</var> be the result of <a href="common-microsyntaxes.html#strictly-split-a-string" title="strictly split a string">strictly splitting the
   string</a> <var title="">payload</var> on U+0026 AMPERSAND
   characters (&amp;).</p></li>

   <li><p>If the <var title="">isindex</var> flag is set and the first
   string in <var title="">strings</var> does not contain a "=" (U+003D) character, insert a U+003D EQUALS SIGN character
   (=) at the start of the first string in <var title="">strings</var>.</p></li>

   <li><p>Let <var title="">pairs</var> be an empty list of name-value
   pairs.</p></li>

   <li>

    <p>For each string <var title="">string</var> in <var title="">strings</var>, run these substeps:</p>

    <ol><li>

      <p>If <var title="">string</var> contains a "=" (U+003D) character, then let <var title="">name</var> be the
      substring of <var title="">string</var> from the start of <var title="">string</var> up to but excluding its first "=" (U+003D) character, and let <var title="">value</var> be
      the substring from the first character, if any, after the first
      "=" (U+003D) character up to the end of <var title="">string</var>. If the first U+003D EQUALS SIGN character
      (=) is the first character, then <var title="">name</var> will
      be the empty string. If it is the last character, then <var title="">value</var> will be the empty string.</p>

      <p>Otherwise, <var title="">string</var> contains no "=" (U+003D) characters. Let <var title="">name</var> have
      the value of <var title="">string</var> and let <var title="">value</var> be the empty string.</p>

     </li>

     <li>

      <p>Replace any "+" (U+002B) characters in <var title="">name</var> and <var title="">value</var> with U+0020
      SPACE characters.</p>

     </li>

     <li>

      <p>Replace any escape in <var title="">name</var> and <var title="">value</var> with the character represented by the
      escape. This replacement most not be recursive.</p>

      <p>An escape is a "%" (U+0025) character followed by
      two characters in the ranges <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a>, U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN
      CAPITAL LETTER F, and U+0061 LATIN SMALL LETTER A to U+0066
      LATIN SMALL LETTER F.</p>

      <p>The character represented by an escape is the Unicode
      character whose code point is equal to the value of the two
      characters after the "%" (U+0025) character,
      interpreted as a hexadecimal number (in the range 0..255).</p>

      <p class="example">So for instance the string "<code title="">A%2BC</code>" would become "<code title="">A+C</code>".
      Similarly, the string "<code title="">100%25AA%21</code>"
      becomes the string "<code title="">100%AA!</code>".</p>

     </li>

     <li><p>Convert the <var title="">name</var> and <var title="">value</var> strings to their byte representation in
     ISO-8859-1 (i.e. convert the Unicode string to a byte string,
     mapping code points to byte values directly).</p></li>

     <li><p>Add a pair consisting of <var title="">name</var> and <var title="">value</var> to <var title="">pairs</var>.</p></li>

    </ol></li>

   <li><p>If any of the name-value pairs in <var title="">pairs</var>
   have a name component consisting of the string "<code title="">_charset_</code>" encoded in US-ASCII, and the value
   component of the first such pair, when decoded as US-ASCII, is the
   name of a supported character encoding, then let <var title="">encoding</var> be that character encoding (replacing the
   default passed to the algorithm).</p></li>

   <li><p>Convert the name and value components of each name-value
   pair in <var title="">pairs</var> to Unicode by interpreting the
   bytes according to the encoding <var title="">encoding</var>.</p></li>

   <li><p>Return <var title="">pairs</var>.</p></li>

  </ol><p class="note">Parameters on the
  <code><a href="iana.html#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code> MIME type are
  ignored. In particular, this MIME type does not support the <code title="">charset</code> parameter.</p>



  <div class="impl">

  <h5 id="multipart-form-data"><span class="secno">4.10.22.6 </span>Multipart form data</h5>

  <!-- http://hixie.ch/tests/adhoc/html/forms/submission/multipart_form-data/ -->

  <!-- NOTE: This algorithm is also used by the XHR spec -->

  <p>The <dfn id="multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><!-- the first few steps of this are the same as in the previous section --><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <p>If the algorithm was invoked with an explicit character
    encoding, let the selected character encoding be that encoding.
    (This algorithm is used by other specifications, which provide an
    explicit character encoding to avoid the dependency on the
    <code><a href="the-form-element.html#the-form-element">form</a></code> element described in the next paragraph.)</p>

    <p>Otherwise, if the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute
    that is an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>. If
    none of the encodings are supported, or if none are listed, then
    let the selected character encoding be UTF-8.</p>

    <p>Otherwise, if the <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> is
    an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>, then that is
    the selected character encoding.</p>

    <p>Otherwise, let the selected character encoding be UTF-8.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>" and its type is
     "<code title="">hidden</code>", replace its value with <var title="">charset</var>.</p></li>

     <!-- the step that replaces a file with its name is missing in
     this version of the algorithm -->

     <li><p>For each character in the entry's name and value that
     cannot be expressed using the selected character encoding,
     replace the character by a string consisting of a U+0026
     AMPERSAND character (&amp;), a "#" (U+0023) character,
     one or more characters in the range <a href="common-microsyntaxes.html#ascii-digits">ASCII digits</a> representing the Unicode code point of the
     character in base ten, and finally a U+003B SEMICOLON character
     (;).</p></li><!-- we should say it should be the shortest
     possible string, no leading zeros. this whole step is asinine,
     though, so... -->

     <!-- this is where the similarities with the previous section end -->

    </ol></li>

   <li>

    <p>Encode the (now mutated) <var title="">form data set</var>
    using the rules described by RFC 2388, <cite>Returning Values from
    Forms: <code title="">multipart/form-data</code></cite>, and
    return the resulting byte stream. <a href="references.html#refsRFC2388">[RFC2388]</a></p>

    <p>Each entry in the <var title="">form data set</var> is a
    <i>field</i>, the name of the entry is the <i>field name</i> and
    the value of the entry is the <i>field value</i>.</p>

    <p>The order of parts must be the same as the order of fields in
    the <var title="">form data set</var>. Multiple entries with the
    same name must be treated as distinct fields.</p>

    <p class="note">In particular, this means that multiple files
    submitted as part of a single <code title="">&lt;input&#160;type=file&#160;multiple&gt;</code> element
    will result in each file having its own field; the "sets of files"
    feature ("<code title="">multipart/mixed</code>") of RFC 2388 is
    not used.</p>

    <p>The parts of the generated <code title="">multipart/form-data</code> resource that correspond to
    non-file fields must not have a <code><a href="urls.html#content-type">Content-Type</a></code> header
    specified. Their names and values must be encoded using the
    character encoding selected above (field names in particular do
    not get converted to a 7-bit safe encoding as suggested in RFC
    2388).</p>

    <p>File names included in the generated <code title="">multipart/form-data</code> resource (as part of file
    fields) must use the character encoding selected above, though the
    precise name may be approximated if necessary (e.g. newlines could
    be removed from file names, quotes could be changed to "%22", and
    characters not expressible in the selected character encoding
    could be replaced by other characters). User agents must not use
    the RFC 2231 encoding suggested by RFC 2388.</p> <!-- this isn't a
    willful violation since 2388 doesn't make it a requirement, it
    just vaguely suggests it -->

    <p>The boundary used by the user agent in generating the return
    value of this algorithm is the <dfn id="multipart/form-data-boundary-string"><code title="">multipart/form-data</code> boundary string</dfn>. (This
    value is used to generate the MIME type of the form submission
    payload generated by this algorithm.)</p>

   </li>

  </ol></div>

  <p>For details on how to interpret <code>multipart/form-data</code>
  payloads, see RFC 2388. <a href="references.html#refsRFC2388">[RFC2388]</a></p>



  <h5 id="plain-text-form-data"><span class="secno">4.10.22.7 </span>Plain text form data</h5>

  <div class="impl">

  <p>The <dfn id="text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><li><p>Let <var title="">result</var> be the empty string.</p></li>

   <li>

    <!-- this is different from application/x-www-form-urlencoded in
    that it isn't limited to ASCII-compatible encodings -->

    <p>If the <code><a href="the-form-element.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="the-form-element.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="the-form-element.html#attr-form-accept-charset">accept-charset</a></code> attribute.
    If none of the encodings are supported, or if none are listed,
    then let the selected character encoding be UTF-8.</p>

    <p>Otherwise, the selected character encoding is the
    <a href="infrastructure.html#document's-character-encoding">document's character encoding</a>.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</p></li>

   <li><p>If the entry's name is "<code title="attr-fe-name-charset"><a href="attributes-common-to-form-controls.html#attr-fe-name-charset">_charset_</a></code>" and its type is
   "<code title="">hidden</code>", replace its value with <var title="">charset</var>.</p></li>

   <li><p>If the entry's type is "<code title="">file</code>", replace
   its value with the file's filename only.</p></li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>Append the entry's name to <var title="">result</var>.</p></li>

     <li><p>Append a single "=" (U+003D) character to <var title="">result</var>.</p></li>

     <li><p>Append the entry's value to <var title="">result</var>.</p></li>

     <li><p>Append a "CR" (U+000D) "LF" (U+000A)
     character pair to <var title="">result</var>.</p></li>

    </ol></li>

   <li><p>Encode <var title="">result</var> using the selected
   character encoding and return the resulting byte stream.</p></li>

  </ol></div>

  <p>Payloads using the <code>text/plain</code> format are intended to
  be human readable. They are not reliably interpretable by computer,
  as the format is ambiguous (for example, there is no way to
  distinguish a literal newline in a value from the newline at the end
  of the value).</p>



  <div class="impl">

  <h4 id="resetting-a-form"><span class="secno">4.10.23 </span>Resetting a form</h4>

  <p>When a <code><a href="the-form-element.html#the-form-element">form</a></code> element <var title="">form</var> is <dfn id="concept-form-reset" title="concept-form-reset">reset</dfn>, the user agent must
  <a href="webappapis.html#fire-a-simple-event">fire a simple event</a> named <code title="event-reset">reset</code>, that is cancelable, at <var title="">form</var>, and then, if that event is not canceled, must
  invoke the <a href="#concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</a> of each <a href="forms.html#category-reset" title="category-reset">resettable
  element</a> whose <a href="association-of-controls-and-forms.html#form-owner">form owner</a> is <var title="">form</var>.</p>

  <p>Each <a href="forms.html#category-reset" title="category-reset">resettable element</a>
  defines its own <dfn id="concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</dfn>. Changes made to form controls as part of these
  algorithms do not count as changes caused by the user (and thus,
  e.g., do not cause <code title="event-input">input</code> events to
  fire).</p>

  </div>



  </body></html>